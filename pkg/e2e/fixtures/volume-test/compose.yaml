services:
  nginx:
    build: nginx-build
    volumes:
      - "./static:/usr/share/nginx/html:z"
    ports:
      - 8090:80

  nginx2:
    build: nginx-build
    volumes:
      - "staticVol:/usr/share/nginx/html:ro,z"
      - /usr/src/app/node_modules
      - "otherVol:/usr/share/nginx/test:z"
    ports:
      - 9090:80
    configs:
      - myconfig
    secrets:
      - mysecret
    security_opt:
      - label=disable

volumes:
  staticVol:
  otherVol:
    name: myVolume

configs:
  myconfig:
    file: ./static/index.html

secrets:
  mysecret:
    file: ./static/index.html
